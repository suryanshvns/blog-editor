{"version":3,"names":["ruleComposer","require","eslint","eslintVersion","ESLint","version","noInvalidThisRule","Linter","getRules","get","parseInt","module","exports","filterReports","problem","inClassMember","node","type","key","parent"],"sources":["../../src/rules/no-invalid-this.cjs"],"sourcesContent":["const ruleComposer = require(\"eslint-rule-composer\");\nconst eslint = require(\"eslint\");\nconst eslintVersion = eslint.ESLint.version;\n\nconst noInvalidThisRule = new eslint.Linter().getRules().get(\"no-invalid-this\");\n\nif (parseInt(eslintVersion, 10) >= 8) {\n  // ESLint 8 supports class properties / private methods natively\n  // so we simply forward the original rule\n  module.exports = noInvalidThisRule;\n} else {\n  module.exports = ruleComposer.filterReports(noInvalidThisRule, problem => {\n    let inClassMember = false;\n    let node = problem.node;\n\n    while (node) {\n      if (\n        node.type === \"ClassPrivateMethod\" ||\n        node.type === \"ClassPrivateProperty\" ||\n        node.type === \"ClassProperty\" ||\n        node.type === \"PropertyDefinition\" ||\n        (node.type === \"MethodDefinition\" &&\n          node.key.type === \"PrivateIdentifier\")\n      ) {\n        inClassMember = true;\n        break;\n      } else if (\n        node.type === \"FunctionDeclaration\" ||\n        node.type === \"FunctionExpression\"\n      ) {\n        inClassMember = false;\n        break;\n      }\n\n      node = node.parent;\n    }\n\n    return !inClassMember;\n  });\n}\n"],"mappings":"AAAA,MAAMA,YAAY,GAAGC,OAAO,CAAC,sBAAD,CAA5B;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAD,CAAtB;;AACA,MAAME,aAAa,GAAGD,MAAM,CAACE,MAAP,CAAcC,OAApC;AAEA,MAAMC,iBAAiB,GAAG,IAAIJ,MAAM,CAACK,MAAX,GAAoBC,QAApB,GAA+BC,GAA/B,CAAmC,iBAAnC,CAA1B;;AAEA,IAAIC,QAAQ,CAACP,aAAD,EAAgB,EAAhB,CAAR,IAA+B,CAAnC,EAAsC;EAGpCQ,MAAM,CAACC,OAAP,GAAiBN,iBAAjB;AACD,CAJD,MAIO;EACLK,MAAM,CAACC,OAAP,GAAiBZ,YAAY,CAACa,aAAb,CAA2BP,iBAA3B,EAA8CQ,OAAO,IAAI;IACxE,IAAIC,aAAa,GAAG,KAApB;IACA,IAAIC,IAAI,GAAGF,OAAO,CAACE,IAAnB;;IAEA,OAAOA,IAAP,EAAa;MACX,IACEA,IAAI,CAACC,IAAL,KAAc,oBAAd,IACAD,IAAI,CAACC,IAAL,KAAc,sBADd,IAEAD,IAAI,CAACC,IAAL,KAAc,eAFd,IAGAD,IAAI,CAACC,IAAL,KAAc,oBAHd,IAICD,IAAI,CAACC,IAAL,KAAc,kBAAd,IACCD,IAAI,CAACE,GAAL,CAASD,IAAT,KAAkB,mBANtB,EAOE;QACAF,aAAa,GAAG,IAAhB;QACA;MACD,CAVD,MAUO,IACLC,IAAI,CAACC,IAAL,KAAc,qBAAd,IACAD,IAAI,CAACC,IAAL,KAAc,oBAFT,EAGL;QACAF,aAAa,GAAG,KAAhB;QACA;MACD;;MAEDC,IAAI,GAAGA,IAAI,CAACG,MAAZ;IACD;;IAED,OAAO,CAACJ,aAAR;EACD,CA3BgB,CAAjB;AA4BD"}